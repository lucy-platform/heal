{"version":"2.0","models":[{"Key":"3","Name":"SituationalAwareness","Definition":{"version":"v2","attributes":[],"flows":{"blocks":[{"title":"CallAction","type":"callaction","id":"c8b29279-6775-47d6-ac8f-2a3ab6bd6664","position":{"left":324.00000381469727,"top":600},"surface":"add-record","connections":{"inputs":[{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:temperature","target":"c8b29279-6775-47d6-ac8f-2a3ab6bd6664:input:temperature"}],"outputs":[{"source":"c8b29279-6775-47d6-ac8f-2a3ab6bd6664:output:healthFlag","target":"2c435229-7f2e-4343-b868-be04693ea576:input:healthflag"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"temperature","type":"","label":"temperature","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"healthFlag","type":"","label":"healthFlag","description":"","documentation":""}],"actionName":"temperature-check","modelName":"SituationalAwareness"},{"title":"Output","type":"actionoutput","id":"e4fa5703-70d1-428d-ecbc-0fb63601d476","position":{"left":931,"top":145},"surface":"add-record","connections":{"inputs":[{"source":"2c435229-7f2e-4343-b868-be04693ea576:output:output","target":"e4fa5703-70d1-428d-ecbc-0fb63601d476:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"f6015e9b-8292-4782-8378-e21b3a0c0218","position":{"left":60,"top":62},"surface":"get-users","connections":{"inputs":[],"outputs":[{"source":"f6015e9b-8292-4782-8378-e21b3a0c0218:output:output","target":"584dbf7a-766c-460f-d92a-4b6f2aa4ff16:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""}],"actionName":"get-users","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"ES6Javascript","type":"es6javascript","id":"a61e7056-2217-4496-c68d-ed0feb2e9a12","position":{"left":315,"top":66},"surface":"contact-tracing","connections":{"inputs":[{"source":"002607e2-9074-4872-b39a-ab60213a1d53:output:output","target":"a61e7056-2217-4496-c68d-ed0feb2e9a12:input:trigger"}],"outputs":[{"source":"a61e7056-2217-4496-c68d-ed0feb2e9a12:output:output","target":"125f536d-f942-44f8-9f5a-64b9c891475d:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"output","description":"","documentation":""}],"description":"","code":"let locations = [\r\n    {'location':'Lobby (CheckIn)','time':'10:00 AM'},\r\n    {'location':'Floor 1 (Access Card)','time':'10:05 AM'},\r\n    {'location':'Conference Room 1','time':'10:30 AM'},\r\n    {'location':'Cafteria (Access Card)','time':'12:30 PM'},\r\n];\r\n\r\nvar names = [\"Zariah Cantu\",\r\n\"Lena Jimenez\",\r\n\"Tiana Flynn\",\r\n\"Mario Trujillo\",\r\n\"Nikolas Conner\",\r\n\"Sage Mills\",\r\n\"Maia Ferguson\",\r\n\"Rachael Cooke\",\r\n\"Erin Ellison\",\r\n\"Ezra Nelson\",\r\n\"Alex Dalton\",\r\n\"Stephen Cardenas\",\r\n\"Isaias Jones\",\r\n\"Micaela Castro\",\r\n\"Koen Hunter\",\r\n\"Yuliana Greer\",\r\n\"Kolby Huerta\",\r\n\"Howard Curry\",\r\n\"Yosef Hebert\",\r\n\"Ann Benjamin\",\r\n\"Emma Prince\",\r\n\"Jane Garrett\",\r\n\"Valerie Chapman\",\r\n\"Josh Blackwell\",\r\n];\r\nvar j  = 0;\r\nfunction populatePeople(people,count) {\r\n    for(var i=0;i<count;i++) {\r\n        j++;\r\n        let k = j % names.length;\r\n        let nextName = names[k];\r\n        let id = 'id' + i;\r\n        let name = nextName;\r\n        let location = '';\r\n        let source = 'Lucy';\r\n        let email = nextName.split(' ')[0]+'.' + nextName.split(' ')[1] + '@gmail.com';\r\n        people.push({id,name,location,source,email});\r\n    }\r\n}\r\nlet tracing = [];\r\nfor(let l in locations) {\r\n    let loc = locations[l];\r\n    let ld = {location:loc.location,time:loc.time,people:[]};\r\n    tracing.push(ld);\r\n    populatePeople(ld.people,5);\r\n}\r\n\r\nlet tracing_ = [\r\n    {\r\n        \"location\": \"meeting room\",\r\n        \"time\": \"10.00 am\",\r\n        \"people\":[\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            },\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            },\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            }\r\n        ]\r\n    },\r\n    {\r\n        \"location\": \"cafeteria\",\r\n        \"time\": \"01.00 pm\",\r\n        \"people\": [\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            },\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            },\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            },\r\n            {\r\n                \"id\": \"e01\",\r\n                \"name\": \"Nuwan Dinesh\",\r\n                \"location\": \"Meeting room\",\r\n                \"temperature\": 27,\r\n                \"source\": \"Lucy\",\r\n                \"countriesvisited\": \"\",\r\n                \"currentStatus\": \"\",\r\n                \"checkinat\": null,\r\n                \"checkoutat\": null,\r\n                \"createdat\": null,\r\n                \"email\": \"ndmsgamage@gmail.com\",\r\n                \"healthflag\": 1,\r\n                \"status\": \"\"\r\n            }\r\n        ]\r\n    }\r\n];\r\n\r\nruntime.done({output: tracing});","timeoutMilliseconds":5000},{"title":"ES6Javascript","type":"es6javascript","id":"ff0a54b8-82c9-4ac5-e336-e2823f521b3b","position":{"left":379,"top":103},"surface":"temperature-check","connections":{"inputs":[{"source":"c43fab24-5da7-4aea-8411-c5214a753bb6:output:temperature","target":"ff0a54b8-82c9-4ac5-e336-e2823f521b3b:input:temperature"}],"outputs":[{"source":"ff0a54b8-82c9-4ac5-e336-e2823f521b3b:output:healthFlag","target":"4a1d09a5-bfe5-4895-b7bb-cd0fc8cca41f:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"temperature","type":"","label":"temperature","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"healthFlag","type":"","label":"healthFlag","description":"","documentation":""}],"description":"","code":"let inputs = runtime.inputs();\r\nlet temperature = inputs.temperature || 0;\r\nlet tempLimit = 35;\r\n\r\nlet healthFlag = temperature > tempLimit ? 1 : 0;\r\n\r\nruntime.done({healthFlag: healthFlag});","timeoutMilliseconds":5000},{"title":"Insert one document","type":"modelcollections:insertone","id":"2c435229-7f2e-4343-b868-be04693ea576","position":{"left":608,"top":102},"surface":"add-record","connections":{"inputs":[{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:name","target":"2c435229-7f2e-4343-b868-be04693ea576:input:name"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:location","target":"2c435229-7f2e-4343-b868-be04693ea576:input:location"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:countriesvisited","target":"2c435229-7f2e-4343-b868-be04693ea576:input:countriesvisited"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:id","target":"2c435229-7f2e-4343-b868-be04693ea576:input:id"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:source","target":"2c435229-7f2e-4343-b868-be04693ea576:input:source"},{"source":"169c6bc2-b232-48b5-9a23-aa720124ef1c:output:createdat","target":"2c435229-7f2e-4343-b868-be04693ea576:input:createdat"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:temperature","target":"2c435229-7f2e-4343-b868-be04693ea576:input:temperature"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:email","target":"2c435229-7f2e-4343-b868-be04693ea576:input:email"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:expectedat","target":"2c435229-7f2e-4343-b868-be04693ea576:input:expectedat"},{"source":"c8b29279-6775-47d6-ac8f-2a3ab6bd6664:output:healthFlag","target":"2c435229-7f2e-4343-b868-be04693ea576:input:healthflag"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:contactnumber","target":"2c435229-7f2e-4343-b868-be04693ea576:input:contactnumber"}],"outputs":[{"source":"2c435229-7f2e-4343-b868-be04693ea576:output:output","target":"0dcd49c4-a828-4d0a-8f12-e1ba5b362302:input:input"},{"source":"2c435229-7f2e-4343-b868-be04693ea576:output:output","target":"e4fa5703-70d1-428d-ecbc-0fb63601d476:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"location","type":"","label":"location","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"name","type":"","label":"name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"currentstatus","type":"","label":"currentstatus","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"temperature","type":"","label":"temperature","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"checkinat","type":"","label":"checkinat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"countriesvisited","type":"","label":"countriesvisited","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"createdat","type":"","label":"createdat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"source","type":"","label":"source","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"checkoutat","type":"","label":"checkoutat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"__data__","type":"text","label":"Data","value":"","description":"Data to be inserted","documentation":"","transformation":"","disablelog":""},{"id":"email","type":"","label":"email","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"expectedat","type":"","label":"expectedat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"healthflag","type":"","label":"healthflag","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"contactnumber","type":"","label":"contactnumber","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"All Output","description":"","documentation":""}],"CollectionName":"0c631aad-965a-42d1-d1ce-c2cc314c8056","configuration":"[]","UpdateAsAttributes":true,"ReceiveIndividualFields":false,"timeout":5000},{"title":"PublishMessage","type":"publishmessage","id":"da053291-4810-4dc9-fbf9-2d77a16bd186","position":{"left":1068,"top":368},"surface":"add-record","connections":{"inputs":[{"source":"0dcd49c4-a828-4d0a-8f12-e1ba5b362302:output:output","target":"da053291-4810-4dc9-fbf9-2d77a16bd186:input:message"}],"outputs":[]},"inputValues":[{"id":"channel","type":"","label":"Channel","value":"situation-dashboard","description":"","documentation":"","transformation":"","disablelog":""},{"id":"message","type":"","label":"Message","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"done","type":"","label":"Done","description":"","documentation":""}]},{"title":"CallAction","type":"callaction","id":"79bb9ac6-c1d2-413e-9932-abeac4f2c0c0","position":{"left":350.00000619888306,"top":431},"surface":"update","connections":{"inputs":[{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:temperature","target":"79bb9ac6-c1d2-413e-9932-abeac4f2c0c0:input:temperature"}],"outputs":[{"source":"79bb9ac6-c1d2-413e-9932-abeac4f2c0c0:output:healthFlag","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:healthFlag"}]},"inputValues":[{"id":"instance","type":"","label":"Instance","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"temperature","type":"","label":"temperature","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"healthFlag","type":"","label":"healthFlag","description":"","documentation":""}],"actionName":"temperature-check","modelName":"SituationalAwareness"},{"title":"ES6Javascript","type":"es6javascript","id":"584dbf7a-766c-460f-d92a-4b6f2aa4ff16","position":{"left":311,"top":86.999996185302734},"surface":"get-users","connections":{"inputs":[{"source":"f6015e9b-8292-4782-8378-e21b3a0c0218:output:output","target":"584dbf7a-766c-460f-d92a-4b6f2aa4ff16:input:trigger"}],"outputs":[{"source":"584dbf7a-766c-460f-d92a-4b6f2aa4ff16:output:filter","target":"473df015-248a-40b5-aa21-33ca709aa476:input:__filter__"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"filter","type":"","label":"filter","description":"","documentation":""}],"description":"","code":"let TodayDT = new Date(new Date().setUTCHours(0,0,0,0));\r\nlet TodayISOString = TodayDT.toISOString();\r\n\r\nlet TomorrowDT = new Date(TodayDT.setDate(TodayDT.getDate() + 1));\r\nlet TomorrowISOString = TomorrowDT.toISOString();\r\n\r\nlet filter = {\r\n    \"createdat\": {\r\n        \"$gte\": TodayISOString,\r\n        \"$lte\": TomorrowISOString\r\n    }\r\n}\r\n\r\nruntime.done({filter: JSON.stringify(filter)});","timeoutMilliseconds":5000},{"title":"Output","type":"actionoutput","id":"125f536d-f942-44f8-9f5a-64b9c891475d","position":{"left":548,"top":104},"surface":"contact-tracing","connections":{"inputs":[{"source":"a61e7056-2217-4496-c68d-ed0feb2e9a12:output:output","target":"125f536d-f942-44f8-9f5a-64b9c891475d:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"c43fab24-5da7-4aea-8411-c5214a753bb6","position":{"left":60,"top":59},"surface":"temperature-check","connections":{"inputs":[],"outputs":[{"source":"c43fab24-5da7-4aea-8411-c5214a753bb6:output:temperature","target":"ff0a54b8-82c9-4ac5-e336-e2823f521b3b:input:temperature"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"temperature","type":"","label":"temperature","description":"","documentation":""}],"actionName":"temperature-check","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"Output","type":"actionoutput","id":"4a1d09a5-bfe5-4895-b7bb-cd0fc8cca41f","position":{"left":711,"top":116},"surface":"temperature-check","connections":{"inputs":[{"source":"ff0a54b8-82c9-4ac5-e336-e2823f521b3b:output:healthFlag","target":"4a1d09a5-bfe5-4895-b7bb-cd0fc8cca41f:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":"healthFlag"},{"title":"Output","type":"actionoutput","id":"68eb12c2-a957-48cf-9e84-3069b78d93d4","position":{"left":925,"top":122},"surface":"get-users","connections":{"inputs":[{"source":"473df015-248a-40b5-aa21-33ca709aa476:output:output","target":"68eb12c2-a957-48cf-9e84-3069b78d93d4:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"ES6Javascript","type":"es6javascript","id":"169c6bc2-b232-48b5-9a23-aa720124ef1c","position":{"left":228,"top":43},"surface":"add-record","connections":{"inputs":[],"outputs":[{"source":"169c6bc2-b232-48b5-9a23-aa720124ef1c:output:createdat","target":"2c435229-7f2e-4343-b868-be04693ea576:input:createdat"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"createdat","type":"","label":"createdat","description":"","documentation":""}],"description":"","code":"var date = new Date();\r\nruntime.done({createdat: date});\r\n\r\n","timeoutMilliseconds":5000},{"title":"ES6Javascript","type":"es6javascript","id":"add96a64-8977-4464-8e1e-ee54d4525a68","position":{"left":363,"top":123},"surface":"search-users","connections":{"inputs":[{"source":"8ba0cd55-707e-4154-de46-5d17e868c651:output:searchtext","target":"add96a64-8977-4464-8e1e-ee54d4525a68:input:searchtext"}],"outputs":[{"source":"add96a64-8977-4464-8e1e-ee54d4525a68:output:output","target":"cd0797eb-a81b-4940-94c3-b9d48eae95b1:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"searchtext","type":"","label":"searchtext","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"output","description":"","documentation":""}],"description":"","code":"let collections = lucy.currentModel().collections();\r\nlet inputs = runtime.inputs();\r\nlet searchText = inputs.searchtext;\r\n\r\n// cleaning user input\r\nlet regExp = /[^\\w\\s+-]/gi;\r\nlet cleanedSearchText = searchText.replace(regExp, \"\");\r\n\r\nlet filter = {\r\n    \"$or\" : [\r\n        {\"name\": {\"$regex\" : cleanedSearchText, $options:\"i\"}},\r\n        {\"email\": {\"$regex\": cleanedSearchText, $options:\"i\"}}\r\n    ]\r\n}\r\n\r\ncollections.findMany(\"people\", filter, {})\r\n.then(res => runtime.done({output: res}));","timeoutMilliseconds":5000},{"title":"Action","type":"actionstart","id":"616bdb81-881c-48ad-dc3c-062d266d43fd","position":{"left":100,"top":100},"surface":"update","connections":{"inputs":[],"outputs":[{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:name","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:name"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:location","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:location"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:temperature","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:temperature"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:countriesvisited","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:countriesvisited"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:status","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:status"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:id","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:id"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:_id","target":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c:input:_id"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:email","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:email"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:_id","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:_id"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:temperature","target":"79bb9ac6-c1d2-413e-9932-abeac4f2c0c0:input:temperature"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:contactnumber","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:contactnumber"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"name","type":"","label":"name","description":"","documentation":""},{"id":"location","type":"","label":"location","description":"","documentation":""},{"id":"temperature","type":"","label":"temperature","description":"","documentation":""},{"id":"countriesvisited","type":"","label":"countriesvisited","description":"","documentation":""},{"id":"status","type":"","label":"status","description":"","documentation":""},{"id":"id","type":"","label":"id","description":"","documentation":""},{"id":"tempunit","type":"","label":"tempunit","description":"","documentation":""},{"id":"_id","type":"","label":"_id","description":"","documentation":""},{"id":"email","type":"","label":"email","description":"","documentation":""},{"id":"contactnumber","type":"","label":"contactnumber","description":"","documentation":""}],"actionName":"update","initiate":false,"published":true,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"ES6Javascript","type":"es6javascript","id":"a6c8f888-c8a4-45be-bcdf-14869f63ed13","position":{"left":568.00003433227539,"top":49.999996185302734},"surface":"update","connections":{"inputs":[{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:name","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:name"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:location","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:location"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:temperature","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:temperature"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:countriesvisited","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:countriesvisited"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:status","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:status"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:id","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:id"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:email","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:email"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:_id","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:_id"},{"source":"79bb9ac6-c1d2-413e-9932-abeac4f2c0c0:output:healthFlag","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:healthFlag"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:contactnumber","target":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:input:contactnumber"}],"outputs":[{"source":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:output:output","target":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c:input:trigger"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"name","type":"","label":"name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"location","type":"","label":"location","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"temperature","type":"","label":"temperature","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"countriesvisited","type":"","label":"countriesvisited","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"status","type":"","label":"status","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"_id","type":"","label":"_id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"email","type":"","label":"email","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"healthFlag","type":"","label":"healthFlag","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"contactnumber","type":"","label":"contactnumber","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"output","description":"","documentation":""}],"description":"","code":"let collections = lucy.currentModel().collections();\r\nlet inputs = runtime.inputs();\r\n\r\nlet checkInDT = null\r\nlet checkOutDT = null;\r\nlet DT = new Date();\r\n\r\nif(inputs.status == \"check-in\") {\r\n    checkInDT = DT;\r\n}\r\nelse if(inputs.status == \"check-out\") {\r\n    checkOutDT = DT;\r\n}\r\n\r\nlet args = {\r\n    \"name\": inputs.name,\r\n    \"location\": inputs.location,\r\n    \"temperature\": inputs.temperature,\r\n    \"countriesvisited\": inputs.countriesvisited,\r\n    \"status\": inputs.status,\r\n    \"checkinat\": checkInDT,\r\n    \"checkoutat\": checkOutDT,\r\n    \"email\": inputs.email,\r\n    \"healthflag\": inputs.healthFlag,\r\n    \"contactnumber\": inputs.contactnumber\r\n};\r\n\r\ncollections.updateOne(\r\n    \"people\",\r\n    {_id: inputs._id},\r\n    {\"$set\":args},\r\n    {}\r\n).then(res => runtime.done({output: res}));","timeoutMilliseconds":5000},{"title":"Find all documents","type":"modelcollections:findall","id":"473df015-248a-40b5-aa21-33ca709aa476","position":{"left":591,"top":84},"surface":"get-users","connections":{"inputs":[{"source":"584dbf7a-766c-460f-d92a-4b6f2aa4ff16:output:filter","target":"473df015-248a-40b5-aa21-33ca709aa476:input:__filter__"}],"outputs":[{"source":"473df015-248a-40b5-aa21-33ca709aa476:output:output","target":"68eb12c2-a957-48cf-9e84-3069b78d93d4:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"location","type":"","label":"location","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"name","type":"","label":"name","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"currentstatus","type":"","label":"currentstatus","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"temperature","type":"","label":"temperature","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"checkinat","type":"","label":"checkinat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"countriesvisited","type":"","label":"countriesvisited","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"createdat","type":"","label":"createdat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"source","type":"","label":"source","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"id","type":"","label":"id","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"checkoutat","type":"","label":"checkoutat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"email","type":"","label":"email","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"expectedat","type":"","label":"expectedat","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"contactnumber","type":"","label":"contactnumber","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"healthflag","type":"","label":"healthflag","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"__filter__","type":"","label":"Filter","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"All Output","description":"","documentation":""}],"CollectionName":"0c631aad-965a-42d1-d1ce-c2cc314c8056","configuration":"[]","UpdateAsAttributes":false,"ReceiveIndividualFields":false,"TakeFilterFromPin":true,"timeout":5000},{"title":"ES6Javascript","type":"es6javascript","id":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c","position":{"left":801.00003433227539,"top":224.00000381469727},"surface":"update","connections":{"inputs":[{"source":"a6c8f888-c8a4-45be-bcdf-14869f63ed13:output:output","target":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c:input:trigger"},{"source":"616bdb81-881c-48ad-dc3c-062d266d43fd:output:_id","target":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c:input:_id"}],"outputs":[{"source":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c:output:output","target":"d710d8a0-8f80-4fd4-9509-dcd48c2ba66e:input:input"}]},"inputValues":[{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"_id","type":"","label":"_id","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"output","type":"","label":"output","description":"","documentation":""}],"description":"","code":"let collections = lucy.currentModel().collections();\r\nlet inputs = runtime.inputs();\r\n\r\nlet filter = {\r\n    \"_id\":  inputs._id\r\n}\r\n\r\ncollections.findOne(\"people\", filter, {})\r\n.then(res => runtime.done({output: res}));","timeoutMilliseconds":5000},{"title":"Output","type":"actionoutput","id":"cd0797eb-a81b-4940-94c3-b9d48eae95b1","position":{"left":663,"top":145.99999618530273},"surface":"search-users","connections":{"inputs":[{"source":"add96a64-8977-4464-8e1e-ee54d4525a68:output:output","target":"cd0797eb-a81b-4940-94c3-b9d48eae95b1:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Action","type":"actionstart","id":"8ba0cd55-707e-4154-de46-5d17e868c651","position":{"left":63,"top":129},"surface":"search-users","connections":{"inputs":[],"outputs":[{"source":"8ba0cd55-707e-4154-de46-5d17e868c651:output:searchtext","target":"add96a64-8977-4464-8e1e-ee54d4525a68:input:searchtext"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"searchtext","type":"","label":"searchtext","description":"","documentation":""}],"actionName":"search-users","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"Output","type":"actionoutput","id":"d710d8a0-8f80-4fd4-9509-dcd48c2ba66e","position":{"left":1015.9999732971191,"top":113.00000381469727},"surface":"update","connections":{"inputs":[{"source":"19b10f6a-7fad-4c33-e824-6c23d30ccc2c:output:output","target":"d710d8a0-8f80-4fd4-9509-dcd48c2ba66e:input:input"}],"outputs":[]},"inputValues":[{"id":"input","type":"","label":"Value","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[],"fieldName":""},{"title":"Serialize JSON","type":"tojson","id":"0dcd49c4-a828-4d0a-8f12-e1ba5b362302","position":{"left":830,"top":371},"surface":"add-record","connections":{"inputs":[{"source":"2c435229-7f2e-4343-b868-be04693ea576:output:output","target":"0dcd49c4-a828-4d0a-8f12-e1ba5b362302:input:input"}],"outputs":[{"source":"0dcd49c4-a828-4d0a-8f12-e1ba5b362302:output:output","target":"da053291-4810-4dc9-fbf9-2d77a16bd186:input:message"}]},"inputValues":[{"id":"input","type":"","label":"Input","value":"","description":"","documentation":"","transformation":"","disablelog":""},{"id":"trigger","type":"","label":"Trigger","value":"","description":"","documentation":"","transformation":"","disablelog":""}],"outputValues":[{"id":"output","type":"","label":"Output","description":"","documentation":""}]},{"title":"Action","type":"actionstart","id":"002607e2-9074-4872-b39a-ab60213a1d53","position":{"left":60,"top":59},"surface":"contact-tracing","connections":{"inputs":[],"outputs":[{"source":"002607e2-9074-4872-b39a-ab60213a1d53:output:output","target":"a61e7056-2217-4496-c68d-ed0feb2e9a12:input:trigger"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""}],"actionName":"contact-tracing","initiate":false,"published":false,"debug":false,"roles":[],"static":true,"canOverrideCredentials":false},{"title":"Action","type":"actionstart","id":"f4aa15f4-b62f-462b-df08-480816c1cd81","position":{"left":34,"top":256},"surface":"add-record","connections":{"inputs":[],"outputs":[{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:name","target":"2c435229-7f2e-4343-b868-be04693ea576:input:name"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:location","target":"2c435229-7f2e-4343-b868-be04693ea576:input:location"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:countriesvisited","target":"2c435229-7f2e-4343-b868-be04693ea576:input:countriesvisited"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:id","target":"2c435229-7f2e-4343-b868-be04693ea576:input:id"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:source","target":"2c435229-7f2e-4343-b868-be04693ea576:input:source"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:temperature","target":"2c435229-7f2e-4343-b868-be04693ea576:input:temperature"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:email","target":"2c435229-7f2e-4343-b868-be04693ea576:input:email"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:expectedat","target":"2c435229-7f2e-4343-b868-be04693ea576:input:expectedat"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:temperature","target":"c8b29279-6775-47d6-ac8f-2a3ab6bd6664:input:temperature"},{"source":"f4aa15f4-b62f-462b-df08-480816c1cd81:output:contactnumber","target":"2c435229-7f2e-4343-b868-be04693ea576:input:contactnumber"}]},"inputValues":[],"outputValues":[{"id":"output","type":"","label":"All Output","description":"","documentation":""},{"id":"__error__","type":"error","label":"Error","description":"","documentation":""},{"id":"name","type":"","label":"name","description":"","documentation":""},{"id":"location","type":"","label":"location","description":"","documentation":""},{"id":"source","type":"","label":"source","description":"","documentation":""},{"id":"countriesvisited","type":"","label":"countriesvisited","description":"","documentation":""},{"id":"id","type":"","label":"id","description":"","documentation":""},{"id":"temperature","type":"","label":"temperature","description":"","documentation":""},{"id":"email","type":"","label":"email","description":"","documentation":""},{"id":"expectedat","type":"","label":"expectedat","description":"","documentation":""},{"id":"contactnumber","type":"","label":"contactnumber","description":"","documentation":""}],"actionName":"add-record","initiate":false,"published":false,"debug":true,"roles":[],"static":true,"canOverrideCredentials":false}],"position":{"top":0,"left":0}},"sources":[{"name":"add-record","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["name","location","source","countriesvisited","id","temperature","email","expectedat","contactnumber"]},{"name":"get-users","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"contact-tracing","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"temperature-check","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["healthFlag"],"parameters":["temperature"]},{"name":"update","published":true,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["name","location","temperature","countriesvisited","status","id","tempunit","_id","email","contactnumber"]},{"name":"search-users","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["searchtext"]}],"actions":[{"name":"add-record","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["name","location","source","countriesvisited","id","temperature","email","expectedat","contactnumber"]},{"name":"get-users","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"contact-tracing","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":[]},{"name":"temperature-check","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":["healthFlag"],"parameters":["temperature"]},{"name":"update","published":true,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["name","location","temperature","countriesvisited","status","id","tempunit","_id","email","contactnumber"]},{"name":"search-users","published":false,"static":true,"initiate":false,"canOverrideCredentials":false,"outputs":[""],"parameters":["searchtext"]}],"uioptions":{}},"UIDefinition":null,"MetadataDictionary":"null","ApiRoutes":[{"Key":"1350","MapKey":"3","Route":"users/today","Method":"GET","BodyFormat":"JSON","IsActive":"0","Action":"get-users","NoAuth":"0"},{"Key":"1351","MapKey":"3","Route":"users","Method":"POST","BodyFormat":"JSON","IsActive":"0","Action":"add-record","NoAuth":"0"},{"Key":"1352","MapKey":"3","Route":"users/update","Method":"PATCH","BodyFormat":"JSON","IsActive":"0","Action":"update","NoAuth":"0"},{"Key":"1353","MapKey":"3","Route":"users/search","Method":"POST","BodyFormat":"JSON","IsActive":"0","Action":"search-users","NoAuth":"0"},{"Key":"1354","MapKey":"3","Route":"users/reports/contact-tracing","Method":"GET","BodyFormat":"JSON","IsActive":"0","Action":"contact-tracing","NoAuth":"0"}],"JSModules":[],"ModelCollections":[{"Key":"289","MapKey":"3","GUID":"0c631aad-965a-42d1-d1ce-c2cc314c8056","Attributes":"[{\"name\":\"id\"},{\"name\":\"name\"},{\"name\":\"location\"},{\"name\":\"temperature\"},{\"name\":\"source\"},{\"name\":\"countriesvisited\"},{\"name\":\"currentstatus\"},{\"name\":\"checkinat\"},{\"name\":\"checkoutat\"},{\"name\":\"createdat\"},{\"name\":\"email\"},{\"name\":\"expectedat\"},{\"name\":\"healthflag\"},{\"name\":\"contactnumber\"}]","Name":"people"}]}]}